<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ym.mapper.RecommentMapper">
    <resultMap id="rcmt" type="com.ym.entity.Recomment">
        <id property="id" column="id"/>
        <!--        后者对应数据库-->
        <result property="pid" column="pid"/>
        <result property="product.pname" column="pname"/>
        <result property="product.mpicture" column="mpicture"/>
        <result property="sid" column="sid"/>
        <result property="recommentsite.site" column="site"/>
        <result property="weigth" column="weigth"/>
    </resultMap>
    <!--    三表连接查询-->
    <select id="getRecommentByXML" parameterType="int" resultMap="rcmt">
        select r.*,p.pname,p.mpicture,rs.site from product p join recomment r on p.pid=r.pid
        join recommentsite rs on r.sid=rs.sid
        <where>
            <if test="sid!=null and sid!=''">
                and r.sid=#{sid}
            </if>
        </where>
    </select>
</mapper>
